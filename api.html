<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>MonsterAR Payment API</title>
</head>
<body>
    <script>
        // 付費驗證API - 根據設定的狀態代碼回傳JSON
        
        // 在這裡設定要回傳的狀態代碼 (1-4)
        const STATUS_CODE = 2;  // ← 您可以修改這個數字
        
        // 狀態代碼對應的訊息
        const STATUS_MESSAGES = {
            1: "已付費用戶，正常使用",
            2: "未付費版本 - 請聯絡客服升級", 
            3: "您的帳戶已逾期，請儘速聯絡客服處理付款事宜\n客服電話：0800-123-456",
            4: "無法驗證授權狀態，請檢查網路連線並重新啟動應用程式"
        };
        
        // 建立回應物件
        const response = {
            statusCode: STATUS_CODE,
            message: STATUS_MESSAGES[STATUS_CODE] || STATUS_MESSAGES[4]
        };
        
        // 檢查是否是API請求
        const urlParams = new URLSearchParams(window.location.search);
        const isApiRequest = urlParams.get('api') === 'true' || 
                            document.referrer.includes('unity') ||
                            navigator.userAgent.includes('UnityPlayer');
        
        if (isApiRequest) {
            // API請求：回傳純JSON
            document.body.innerHTML = '';
            document.write(JSON.stringify(response, null, 2));
            document.close();
        } else {
            // 一般瀏覽器訪問：顯示友善介面
            document.body.innerHTML = `
                <h1>MonsterAR 付費驗證 API</h1>
                <div style="font-family: monospace; background: #f5f5f5; padding: 20px; border-radius: 5px;">
                    <h3>當前設定：</h3>
                    <pre>${JSON.stringify(response, null, 2)}</pre>
                </div>
                <div style="margin-top: 20px;">
                    <h3>狀態代碼說明：</h3>
                    <ul>
                        <li><strong>1</strong> - 已付費：正常使用，不做任何動作</li>
                        <li><strong>2</strong> - 未付費：顯示浮水印</li>
                        <li><strong>3</strong> - 長期拖欠：彈出提示並強制退出</li>
                        <li><strong>4</strong> - 網路異常：顯示網路錯誤提示</li>
                    </ul>
                </div>
                <div style="margin-top: 20px;">
                    <h3>API 使用方式：</h3>
                    <p>Unity請求：<code>GET ${window.location.href}?api=true</code></p>
                    <p>直接JSON：<code>GET ${window.location.origin}${window.location.pathname.replace('api.html', 'payment-config.json')}</code></p>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: #e8f4f8; border-radius: 5px;">
                    <h4>🔧 維護說明：</h4>
                    <p>要更改狀態，請編輯此檔案第9行的 <code>STATUS_CODE</code> 數值</p>
                </div>
            `;
        }
    </script>
</body>
</html>